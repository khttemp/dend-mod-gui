# レールおよび、モデルのフラグ（SS）

SSのレールとモデルのフラグについて解説する。

## 前提条件

ここでは、バイナリの知識がちょっと必要になる。

SSのレールフラグでは、バイナリで展開して

それぞれの位置が0か1かのみ判断するようにしている。

![flag](/program/ssUnity/image/flag.png)

Windowsの電卓で、プログラマーのタップを選択し

画像の四角いところをクリックすると、バイナリの状態で見れる

![flag2](/program/ssUnity/image/flag2.png)

その中で、レールデータは

フラグをこんな風に４つに分けて、

基本的に最大32通りの判定をしている。

![flag3](/program/ssUnity/image/flag3.png)

例えば、レールデータでフラグがこのように定義されているときは

バイナリのフラグに変えると、こうなる。

### 1番目のflg

![flagNum1](/program/ssUnity/image/flagNum1.png)

~~【8番目】~~

**使わない。** 旧作では踏切の通過音の設定だったが、モデル内部ですでに実装している。

【7番目】

複線ドリフトすると、飛ぶ（バレルロールなど）

~~【6番目】~~

**使わない。** 

~~【5番目】~~

**使わない。** 

~~【4番目】~~

**使わない。** 

~~【3番目】~~

**使わない。** 

【2番目】

橋の通過音の設定

【1番目】

Noドリフト。ドリフトできないようにする。

### 2番目のflg

![flagNum2](/program/ssUnity/image/flagNum2.png)

~~【8番目】~~

**使わない。**

【7番目】

他のレールもドリフト対象にする。

隣り合っている、全く違うレール番号にドリフトが出来る。

~~【6番目】~~

**使わない。** 

~~【5番目】~~

**使わない。** 

~~【4番目】~~

**使わない。** 

【3番目】

CPUの片輪ドリフトを戻す。

【2番目】

CPUを右側に片輪ドリフトさせる。

【1番目】

CPUを左側に片輪ドリフトさせる。

### 3番目のflg

![flagNum3](/program/ssUnity/image/flagNum3.png)

【8番目】

どんな方向に片輪ドリフトしても、弾かれる

【7番目】

複線の右側線路で、右方向に片輪ドリフト時のみ、弾かれる

【6番目】

複線の左側線路で、左方向に片輪ドリフト時のみ、弾かれる 

~~【5番目】~~

**使わない。** 

~~【4番目】~~

**使わない。** 

~~【3番目】~~

**使わない。** 

【2番目】

右側にレールガードを置ける場合、設置する。

【1番目】

左側にレールガードを置ける場合、設置する。

### 4番目のflg

![flagNum4](/program/ssUnity/image/flagNum4.png)

【8番目】

Disabledレール。つまり、データとしてはあっても無効扱いにする。

これはレールデータを完成したあと、途中で修正必要になった場合、

index番号がなるべくずれないようにするためなどに使う。

【7番目】

CPUを転線させる。

~~【6番目】~~

**使わない。** 

~~【5番目】~~

**使わない。** 

~~【4番目】~~

**使わない。** 

【3番目】

CPUのドリフトを戻す。

【2番目】

CPUを右側にドリフトさせる。

【1番目】

CPUを左側にドリフトさせる。


## モデルのフラグ

![mdlFlg](/program/ssUnity/image/mdlFlg.png)

モデルのフラグは、２つの要素を使う。

### モデルの1番目のflg

![mdlFlagNum1](/program/ssUnity/image/mdlFlagNum1.png)

【6番目】

橋の通過音の設定（レールフラグの1番目の2と同じ）

~~【6番目以外】~~

**使わない。** 

### モデルの2番目のflg

![mdlFlagNum2](/program/ssUnity/image/mdlFlagNum2.png)

【8番目】

複線ドリフトすると、飛ぶ（レールフラグの1番目の7と同じ）

【7番目】

複線の右側線路で、右方向に片輪ドリフト時のみ、弾かれる（レールフラグの3番目の7と同じ）

【6番目】

複線の左側線路で、左方向に片輪ドリフト時のみ、弾かれる （レールフラグの3番目の6と同じ）

【5番目】

どんな方向に片輪ドリフトしても、弾かれる（レールフラグの3番目の8と同じ）

~~【4番目】~~

**使わない。** 

~~【3番目】~~

**使わない。** 

~~【2番目】~~

**使わない。** 

【1番目】

Noドリフト。（レールフラグの1番目の1と同じ）